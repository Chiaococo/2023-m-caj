apiVersion: monitoring.coreos.com/v1
kind: PrometheusRule
metadata:
  name: m-caj-reservation-alert
spec:
  groups:
    - name: m-caj-reservation
      rules:
        - alert: TargetDownAlert
          annotations:
            summary: '{{ $labels.app }} in {{ $labels.namespace }} namespace is down'
          expr: 'up{app="m-caj-reservation",namespace="speaker01"} == 0'
          for: 5s
          labels:
            severity: Critical
        - alert: CpuUsageAlert
          annotations:
            summary: >-
              {{ $labels.app }} in {{ $labels.namespace }} cup is greater than
              1%
          expr: >-
            process_cpu_usage{app="m-caj-reservation",namespace="speaker01"} >
            0.01
          for: 5s
          labels:
            severity: Warning